<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>TimeMaster - Aplikasi Manajemen Waktu</title>
  <style>
    /* Reset dan font */
    * {
      box-sizing: border-box;
    }
    body {
      margin: 0;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: #f9fafb;
      color: #333;
      display: flex;
      flex-direction: column;
      min-height: 100vh;
    }

    /* Navbar */
    nav {
      background-color: #003366;
      color: white;
      padding: 0.8rem 2rem;
      display: flex;
      justify-content: space-between;
      align-items: center;
      flex-wrap: wrap;
      position: sticky;
      top: 0;
      z-index: 1000;
    }
    nav .logo {
      font-weight: 700;
      font-size: 1.5rem;
      letter-spacing: 1.5px;
    }
    nav ul {
      list-style: none;
      display: flex;
      gap: 1.5rem;
      margin: 0;
      padding: 0;
    }
    nav ul li a {
      color: white;
      text-decoration: none;
      font-weight: 600;
      padding: 0.5rem 0;
      transition: color 0.3s;
    }
    nav ul li a:hover {
      color: #ffb300;
    }

    main {
      flex: 1;
      display: flex;
      flex-wrap: wrap;
      gap: 2rem;
      padding: 2rem;
      max-width: 1200px;
      margin: 0 auto;
    }
    section {
      background: white;
      border-radius: 12px;
      box-shadow: 0 4px 12px rgb(0 0 0 / 0.1);
      padding: 1.5rem;
      flex: 1 1 350px;
      min-width: 320px;
      display: flex;
      flex-direction: column;
    }
    h2 {
      margin-top: 0;
      margin-bottom: 1rem;
      color: #003366;
    }

    /* To-Do List */
    #task-form {
      display: flex;
      flex-wrap: wrap;
      gap: 0.5rem;
      margin-bottom: 1rem;
    }
    #task-form input[type="text"] {
      flex: 2 1 200px;
      padding: 0.5rem 0.75rem;
      border: 1px solid #ccc;
      border-radius: 6px;
      font-size: 1rem;
    }
    #task-form select {
      flex: 1 1 120px;
      padding: 0.5rem;
      border-radius: 6px;
      border: 1px solid #ccc;
      font-size: 1rem;
    }
    #task-form button {
      flex: 0 0 100px;
      background-color: #003366;
      color: white;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      font-weight: 600;
      transition: background-color 0.3s;
    }
    #task-form button:hover {
      background-color: #002244;
    }

    ul#task-list {
      list-style: none;
      padding-left: 0;
      flex: 1;
      overflow-y: auto;
      max-height: 300px;
    }
    ul#task-list li {
      padding: 0.5rem 0.75rem;
      border-bottom: 1px solid #eee;
      display: flex;
      justify-content: space-between;
      align-items: center;
      font-size: 1rem;
    }
    ul#task-list li.completed {
      text-decoration: line-through;
      color: #999;
    }
    ul#task-list li span.category {
      font-size: 0.8rem;
      padding: 2px 6px;
      border-radius: 4px;
      color: white;
      margin-left: 0.5rem;
      user-select: none;
    }
    .category.low {
      background-color: #4caf50;
    }
    .category.medium {
      background-color: #ff9800;
    }
    .category.high {
      background-color: #f44336;
    }
    .task-actions button {
      background: none;
      border: none;
      color: #888;
      cursor: pointer;
      font-size: 1.2rem;
      margin-left: 0.5rem;
      transition: color 0.2s;
    }
    .task-actions button:hover {
      color: #333;
    }

    /* Reminder Alarm */
    #reminder-form {
      display: flex;
      gap: 0.5rem;
      margin-bottom: 1rem;
      flex-wrap: wrap;
    }
    #reminder-form input[type="time"] {
      flex: 1 1 120px;
      padding: 0.5rem;
      border-radius: 6px;
      border: 1px solid #ccc;
      font-size: 1rem;
    }
    #reminder-form button {
      flex: 1 1 120px;
      background-color: #00796b;
      color: white;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      font-weight: 600;
      transition: background-color 0.3s;
    }
    #reminder-form button:hover {
      background-color: #004d40;
    }
    #reminder-list {
      list-style: none;
      padding-left: 0;
      max-height: 150px;
      overflow-y: auto;
      font-size: 0.9rem;
    }
    #reminder-list li {
      padding: 0.3rem 0.5rem;
      border-bottom: 1px solid #eee;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    #reminder-list li button {
      background: none;
      border: none;
      color: #888;
      cursor: pointer;
      font-size: 1rem;
      margin-left: 0.5rem;
      transition: color 0.2s;
    }
    #reminder-list li button:hover {
      color: #333;
    }

    /* Dashboard Produktivitas */
    #dashboard {
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    #dashboard canvas {
      max-width: 100%;
      height: 250px;
    }
    #summary {
      margin-top: 1rem;
      font-size: 1rem;
      color: #555;
    }

    /* Responsive */
    @media (max-width: 768px) {
      main {
        flex-direction: column;
      }
      section {
        min-width: 100%;
      }
      nav ul {
        flex-direction: column;
        gap: 0.5rem;
      }
    }
  </style>
</head>
<body>

<nav>
  <div class="logo">TimeMaster</div>
  <ul>
    <li><a href="#todo">To-Do List</a></li>
    <li><a href="#reminder">Pengingat</a></li>
    <li><a href="#dashboard">Dashboard</a></li>
  </ul>
</nav>

<main>
  <!-- To-Do List Section -->
  <section id="todo" aria-label="Daftar tugas harian">
    <h2>To-Do List</h2>
    <form id="task-form" aria-label="Form tambah tugas">
      <input type="text" id="task-input" placeholder="Tambah tugas baru..." aria-required="true" />
      <select id="priority-select" aria-label="Pilih prioritas tugas">
        <option value="low" selected>Rendah</option>
        <option value="medium">Sedang</option>
        <option value="high">Tinggi</option>
      </select>
      <button type="submit" aria-label="Tambah tugas">Tambah</button>
    </form>
    <ul id="task-list" aria-live="polite" aria-relevant="additions removals"></ul>
  </section>

  <!-- Reminder Alarm Section -->
  <section id="reminder" aria-label="Pengingat alarm">
    <h2>Pengingat Alarm</h2>
    <form id="reminder-form" aria-label="Form tambah pengingat">
      <input type="time" id="reminder-time" aria-required="true" />
      <button type="submit" aria-label="Setel pengingat">Setel</button>
    </form>
    <ul id="reminder-list" aria-live="polite" aria-relevant="additions removals"></ul>
  </section>

  <!-- Dashboard Produktivitas -->
  <section id="dashboard" aria-label="Dashboard produktivitas">
    <h2>Dashboard Produktivitas Mingguan</h2>
    <canvas id="productivity-chart" role="img" aria-label="Grafik produktivitas mingguan"></canvas>
    <div id="summary"></div>
  </section>
</main>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
  // Task management
  const taskForm = document.getElementById('task-form');
  const taskInput = document.getElementById('task-input');
  const prioritySelect = document.getElementById('priority-select');
  const taskList = document.getElementById('task-list');

  // Reminder management
  const reminderForm = document.getElementById('reminder-form');
  const reminderTime = document.getElementById('reminder-time');
  const reminderList = document.getElementById('reminder-list');

  // Productivity dashboard
  const ctx = document.getElementById('productivity-chart').getContext('2d');
  let productivityData = {
    labels: ['Sen', 'Sel', 'Rab', 'Kam', 'Jum', 'Sab', 'Min'],
    completedTasks: [0, 0, 0, 0, 0, 0, 0]
  };

  const chart = new Chart(ctx, {
    type: 'bar',
    data: {
      labels: productivityData.labels,
      datasets: [{
        label: 'Tugas Selesai',
        data: productivityData.completedTasks,
        backgroundColor: '#003366'
      }]
    },
    options: {
      responsive: true,
      scales: {
        y: {
          beginAtZero: true,
          precision: 0
        }
      }
    }
  });

  let tasks = JSON.parse(localStorage.getItem('tasks') || '[]');
  let reminders = JSON.parse(localStorage.getItem('reminders') || '[]');

  function saveTasks() {
    localStorage.setItem('tasks', JSON.stringify(tasks));
  }
  function saveReminders() {
    localStorage.setItem('reminders', JSON.stringify(reminders));
  }

  function renderTasks() {
    taskList.innerHTML = '';
    tasks.forEach((task, index) => {
      const li = document.createElement('li');
      li.className = task.completed ? 'completed' : '';
      li.innerHTML = `
        <span>${task.text}</span>
        <span class="category ${task.priority}">${task.priority.charAt(0).toUpperCase() + task.priority.slice(1)}</span>
        <div class="task-actions">
          <button aria-label="Tandai selesai" title="Tandai selesai">&#10003;</button>
          <button aria-label="Hapus tugas" title="Hapus tugas">&times;</button>
        </div>
      `;
      li.querySelector('.task-actions button:first-child').onclick = () => {
        tasks[index].completed = !tasks[index].completed;
        updateProductivity();
        saveTasks();
        renderTasks();
      };
      li.querySelector('.task-actions button:last-child').onclick = () => {
        tasks.splice(index, 1);
        updateProductivity();
        saveTasks();
        renderTasks();
      };
      taskList.appendChild(li);
    });
  }

  taskForm.addEventListener('submit', e => {
    e.preventDefault();
    const text = taskInput.value.trim();
    const priority = prioritySelect.value;
    if (text) {
      tasks.push({ text, priority, completed: false, date: new Date().toISOString().slice(0,10) });
      saveTasks();
      renderTasks();
      taskInput.value = '';
    }
  });

  function renderReminders() {
    reminderList.innerHTML = '';
    reminders.forEach((time, index) => {
      const li = document.createElement('li');
      li.textContent = time;
      const btn = document.createElement('button');
      btn.setAttribute('aria-label', 'Hapus pengingat');
      btn.textContent = 'Ã—';
      btn.onclick = () => {
        reminders.splice(index, 1);
        saveReminders();
        renderReminders();
      };
      li.appendChild(btn);
      reminderList.appendChild(li);
    });
  }

  reminderForm.addEventListener('submit', e => {
    e.preventDefault();
    const time = reminderTime.value;
    if (time && !reminders.includes(time)) {
      reminders.push(time);
      saveReminders();
      renderReminders();
      reminderTime.value = '';
    }
  });

  function updateProductivity() {
    const today = new Date();
    productivityData.completedTasks = [0,0,0,0,0,0,0];
    tasks.forEach(task => {
      if (task.completed) {
        const taskDate = new Date(task.date);
        const diffDays = Math.floor((today - taskDate) / (1000*60*60*24));
        if (diffDays >= 0 && diffDays < 7) {
          let dayIndex = (taskDate.getDay() + 6) % 7;
          productivityData.completedTasks[dayIndex]++;
        }
      }
    });
    chart.data.datasets[0].data = productivityData.completedTasks;
    chart.update();

    const totalCompleted = productivityData.completedTasks.reduce((a,b) => a+b, 0);
    document.getElementById('summary').textContent = `Total tugas selesai minggu ini: ${totalCompleted}`;
  }

  setInterval(() => {
    const now = new Date();
    const currentTime = now.toTimeString().slice(0,5);
    if (reminders.includes(currentTime)) {
      alert(`ðŸ”” Pengingat: Saatnya aktivitas Anda pada pukul ${currentTime}`);
    }
  }, 60000);

  renderTasks();
  renderReminders();
  updateProductivity();
</script>

</body>
</html>
